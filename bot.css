/* Variables */
:root{
  --glass-bg: rgba(255,255,255,0.78);
  --muted: #6b7280;
  --panel-radius: 18px;
  --shadow-strong: 0 28px 60px rgba(2,6,23,0.14);
  --shadow-soft: 0 10px 26px rgba(2,6,23,0.08);
  --accent-ink: rgba(15,23,42,0.95);
  --edge: rgba(15,23,42,0.06);
  --chip-gap: 10px;
}

/* Floating toggle/button container */
.chatbot-container { position: fixed; bottom: 22px; right: 22px; z-index: 1000; }
.chatbot-toggle {
  width:66px; height:66px; border-radius:50%;
  background: linear-gradient(135deg,#7c3aed 0%,#06b6d4 100%);
  border:2px solid rgba(255,255,255,0.12); color:#fff; font-size:26px; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 18px 46px rgba(12,23,63,0.18);
  transition: transform .14s cubic-bezier(.2,.9,.2,1), box-shadow .14s ease;
}
.chatbot-toggle:active{ transform: translateY(1px) scale(.995); }
.chatbot-toggle:hover{ transform: translateY(-4px) scale(1.03); box-shadow:0 26px 62px rgba(12,23,63,0.22); }

/* Window shell (id or class) */
#chatbotWindow, .chatbot-window {
  position: fixed;
  bottom: 100px; right: 24px;
  width: 540px; height: 700px;
  background: linear-gradient(145deg, rgba(249,92,212,0.9) 0%, rgba(111,226,249,0.9) 100%);
  backdrop-filter: blur(4px) saturate(1.05);
  border-radius: 28px;
  box-shadow: 0 4px 60px rgba(2,6,23,0.1),
              0 0 120px 40px rgba(255,255,255,0.7) inset,
              0 0 0 4px rgba(124,58,237,0.25);
  display: none; /* toggled via script */
  flex-direction: column; overflow: hidden;
  border: 2px solid rgba(15,23,42,0.08) !important;
  outline: 1px solid rgba(255,255,255,0.28);
  transition: all .3s ease;
}

/* Header (title area) */
#chatbotWindow .chatbot-header, .chatbot-window .chatbot-header {
  padding: 16px 18px; font-weight:700; color:var(--accent-ink);
  display:flex; align-items:center; gap:12px; position:relative;
  background: linear-gradient(90deg, rgba(235,245,255,0.5), rgba(255,255,255,0));
  border-bottom: 1px solid rgba(15,23,42,0.04);
  box-shadow: 0 4px 10px rgba(12,23,63,0.04);
}
#chatbotWindow .chatbot-header .title, .chatbot-window .chatbot-header .title { font-size:16px; }

/* Body layout: categories + main */
#chatbotWindow .chatbot-body, .chatbot-window .chatbot-body {
  display:flex; gap:14px; padding:14px; height: calc(100% - 120px);
}

/* Categories column */
#chatbotWindow .chatbot-categories, .chatbot-window .chatbot-categories {
  width: 180px; display:flex; flex-direction:column; gap:var(--chip-gap); padding-right:6px;
  border-right: 1px solid rgba(15,23,42,0.04);
}
#categoryButtons { display:flex; flex-direction:column; align-items:stretch; gap:var(--chip-gap); }

/* Category chip - clickable category entries */
.category-chip {
  display:flex; align-items:center; gap:12px; padding:10px 12px;
  border-radius:12px; cursor:pointer; transition: transform .12s ease, box-shadow .12s ease;
  color:var(--accent-ink); font-weight:700; border:1px solid rgba(15,23,42,0.04);
  background: linear-gradient(180deg, rgba(255,255,255,0.86), rgba(250,250,255,0.9));
  position:relative; overflow:visible; box-shadow: var(--shadow-soft);
}
.category-chip:hover { transform: translateY(-4px); box-shadow:0 18px 38px rgba(2,6,23,0.06); }

/* Left accent stripe for chips (small visual bar) */
.category-chip::after{
  content:""; position:absolute; left:10px; top:10px; bottom:10px; width:6px; border-radius:6px; z-index:0; opacity:.98;
}
.category-chip > * { position: relative; z-index:1; }

/* Numeric badges used both in chips and question items */
.category-chip .num-badge,
.question-item .num-badge {
  display:inline-flex; align-items:center; justify-content:center; font-weight:800; box-shadow:0 8px 18px rgba(2,6,23,0.04);
  color:#fff; font-size:14px;
}
.category-chip .num-badge { min-width:36px; height:36px; border-radius:10px; }
.question-item .num-badge { width:40px; height:40px; border-radius:10px; margin-right:12px; flex:0 0 40px; }

/* Main area (messages + input) */
#chatbotWindow .chatbot-main, .chatbot-window .chatbot-main {
  flex:1; display:flex; flex-direction:column; gap:12px;
}
#chatbotWindow .chatbot-messages, .chatbot-window .chatbot-messages {
  flex:1; padding:16px; overflow-y:auto;
  background: linear-gradient(180deg, rgba(247,248,252,0.68), rgba(255,255,255,0.64));
  border-radius: 14px; border:1px solid rgba(15,23,42,0.04);
  box-shadow: 0 10px 28px rgba(2,6,23,0.04);
}

/* Message bubbles */
.message { margin-bottom:12px; padding:14px 16px; border-radius:14px; max-width:84%; word-wrap:break-word; position:relative; animation: fadeIn .18s ease-in; border:1px solid rgba(15,23,42,0.03); }
.user-message {
  margin-left:auto; color:#052e2a;
  background: linear-gradient(135deg, rgba(200,255,235,0.94) 0%, rgba(140,245,210,0.96) 100%);
  box-shadow:0 14px 32px rgba(16,185,129,0.06); border-radius:18px 18px 6px 18px; border:1px solid rgba(16,185,129,0.12);
}
.bot-message {
  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(246,250,255,0.96));
  color:var(--accent-ink); border:1px solid rgba(99,102,241,0.06);
  box-shadow:0 10px 26px rgba(99,102,241,0.04); border-radius:16px 16px 16px 6px;
}

/* Initial bot greeting style */
.bot-message:first-child {
  background: linear-gradient(180deg, rgba(255,255,255,1), rgba(240,248,255,1));
  color:var(--accent-ink); border:1px solid rgba(124,58,237,0.1);
  transition: all .2s ease; cursor: default;
}
.bot-message:first-child:hover { box-shadow:0 4px 12px rgba(124,58,237,0.08); }

/* Input/footer area */
.chatbot-input {
  display:flex; gap:8px; padding:12px; border-top:1px solid rgba(15,23,42,0.1);
  background: rgba(255,255,255,0.7); align-items:center;
}
.chatbot-input input {
  flex:1; padding:12px 16px; border:1px solid rgba(15,23,42,0.12); border-radius:999px; font-size:14px;
  box-shadow:0 6px 18px rgba(2,6,23,0.02) inset, 0 0 0 1px rgba(15,23,42,0.08);
  transition: box-shadow .2s ease;
}
.chatbot-input input:focus {
  outline:none;
  box-shadow:0 0 0 3px rgba(124,58,237,0.2), 0 6px 18px rgba(2,6,23,0.04) inset;
}

/* Send button (last child in input) */
.chatbot-input button,
.chatbot-input > :last-child:not(input) {
  min-width:40px; height:40px; border-radius:999px;
  background: linear-gradient(135deg,#7c3aed 0%,#06b6d4 100%); color:#fff; font-size:16px; cursor:pointer;
  border:none; box-shadow:0 8px 18px rgba(12,23,63,0.1); transition: all .14s ease;
  display:flex; align-items:center; justify-content:center; font-weight:700; padding:0 10px;
}
.chatbot-input button:hover,
.chatbot-input > :last-child:not(input):hover { box-shadow:0 12px 28px rgba(12,23,63,0.15); transform: translateY(-1px); }

/* Question list items */
.question-item {
  text-align:left; padding:12px 14px; border-radius:12px; cursor:pointer; transition: transform .12s ease, box-shadow .12s ease;
  color:var(--accent-ink); border:1px solid rgba(15,23,42,0.03);
  background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(249,250,255,0.92));
  display:flex; align-items:center; gap:12px; justify-content:space-between; overflow:hidden;
}
.question-item:hover { transform: translateY(-6px); box-shadow:0 20px 46px rgba(2,6,23,0.06); }
.question-item .q-text { flex:1 1 auto; text-align:left; padding-right:8px; color: rgba(15,23,42,0.92); }

/* Image popup (full-screen) */
.image-popup { background: rgba(2,6,23,0.88); position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:9999; }
.image-popup img { border-radius:12px; box-shadow:0 18px 46px rgba(2,6,23,0.6); max-width:95%; max-height:95%; }

/* Scrollbar thumb (chat messages) */
#chatbotWindow .chatbot-messages::-webkit-scrollbar-thumb,
.chatbot-window .chatbot-messages::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg,#7c3aed 0%,#06b6d4 100%);
  border-radius:10px; border:2px solid rgba(81,239,245,0.46);
}

/* Active state for category chips */
.category-chip.active {
  background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,250,255,0.95));
  border-color: rgba(124,58,237,0.3);
  box-shadow: 0 0 16px rgba(124,58,237,0.35), var(--shadow-soft);
  transform: translateY(-2px);
}

/* Responsive adjustments */
@media (max-width:740px){
  #chatbotWindow, .chatbot-window { right:12px; left:12px; width:auto; height:72vh; bottom:88px; }
  .chatbot-body { flex-direction:column; }
  .chatbot-categories { width:100%; flex-direction:row; overflow:auto; gap:10px; padding-bottom:6px; }
  #categoryButtons { flex-direction:row; align-items:center; }
}

/* Pastel palette for category chips and question badges (1..8) */
#categoryButtons .category-chip:nth-child(1)::after{ background: linear-gradient(180deg,#ff8ba7,#ff6b9e); }
#categoryButtons .category-chip:nth-child(1) .num-badge{ background: linear-gradient(180deg,#ff8ba7,#ff6b9e); color:#fff; }

#categoryButtons .category-chip:nth-child(2)::after{ background: linear-gradient(180deg,#ffd580,#ffbf5c); }
#categoryButtons .category-chip:nth-child(2) .num-badge{ background: linear-gradient(180deg,#ffd580,#ffbf5c); color:#4a2f00; }

#categoryButtons .category-chip:nth-child(3)::after{ background: linear-gradient(180deg,#86efac,#34d399); }
#categoryButtons .category-chip:nth-child(3) .num-badge{ background: linear-gradient(180deg,#86efac,#34d399); color:#044c2e; }

#categoryButtons .category-chip:nth-child(4)::after{ background: linear-gradient(180deg,#93c5fd,#60a5fa); }
#categoryButtons .category-chip:nth-child(4) .num-badge{ background: linear-gradient(180deg,#93c5fd,#60a5fa); }

#categoryButtons .category-chip:nth-child(5)::after{ background: linear-gradient(180deg,#ffddb6,#ffb86b); }
#categoryButtons .category-chip:nth-child(5) .num-badge{ background: linear-gradient(180deg,#ffddb6,#ffb86b); color:#6a3f00; }

#categoryButtons .category-chip:nth-child(6)::after{ background: linear-gradient(180deg,#c7baff,#9f7cff); }
#categoryButtons .category-chip:nth-child(6) .num-badge{ background: linear-gradient(180deg,#c7baff,#9f7cff); color:#270f5a; }

#categoryButtons .category-chip:nth-child(7)::after{ background: linear-gradient(180deg,#fbcfe8,#fda4af); }
#categoryButtons .category-chip:nth-child(7) .num-badge{ background: linear-gradient(180deg,#fbcfe8,#fda4af); }

#categoryButtons .category-chip:nth-child(8)::after{ background: linear-gradient(180deg,#bde8ff,#78d8ff); }
#categoryButtons .category-chip:nth-child(8) .num-badge{ background: linear-gradient(180deg,#bde8ff,#78d8ff); color:#042f45; }

/* Apply pastel palette to question items when root has cat-N class */
#chatbotWindow.cat-1 .question-item .num-badge,
.chatbot-window.cat-1 .question-item .num-badge { background: linear-gradient(180deg,#ff8ba7,#ff6b9e); color:#fff; }
#chatbotWindow.cat-1 .question-item,
.chatbot-window.cat-1 .question-item { background: linear-gradient(180deg, rgba(255,235,240,0.95), rgba(255,245,247,0.95)); }

#chatbotWindow.cat-2 .question-item .num-badge,
.chatbot-window.cat-2 .question-item .num-badge { background: linear-gradient(180deg,#ffd580,#ffbf5c); color:#3b2f04; }
#chatbotWindow.cat-2 .question-item,
.chatbot-window.cat-2 .question-item { background: linear-gradient(180deg, rgba(255,250,238,0.95), rgba(255,253,240,0.95)); }

#chatbotWindow.cat-3 .question-item .num-badge,
.chatbot-window.cat-3 .question-item .num-badge { background: linear-gradient(180deg,#86efac,#34d399); color:#043b2a; }
#chatbotWindow.cat-3 .question-item,
.chatbot-window.cat-3 .question-item { background: linear-gradient(180deg, rgba(240,255,246,0.96), rgba(246,255,250,0.96)); }

#chatbotWindow.cat-4 .question-item .num-badge,
.chatbot-window.cat-4 .question-item .num-badge { background: linear-gradient(180deg,#93c5fd,#60a5fa); color:#05224a; }
#chatbotWindow.cat-4 .question-item,
.chatbot-window.cat-4 .question-item { background: linear-gradient(180deg, rgba(244,251,255,0.95), rgba(250,253,255,0.95)); }

#chatbotWindow.cat-5 .question-item .num-badge,
.chatbot-window.cat-5 .question-item .num-badge { background: linear-gradient(180deg,#ffddb6,#ffb86b); color:#5a3b00; }
#chatbotWindow.cat-5 .question-item,
.chatbot-window.cat-5 .question-item { background: linear-gradient(180deg, rgba(255,252,240,0.96), rgba(255,254,245,0.96)); }

#chatbotWindow.cat-6 .question-item .num-badge,
.chatbot-window.cat-6 .question-item .num-badge { background: linear-gradient(180deg,#c7baff,#9f7cff); color:#2b1760; }
#chatbotWindow.cat-6 .question-item,
.chatbot-window.cat-6 .question-item { background: linear-gradient(180deg, rgba(250,248,255,0.96), rgba(253,251,255,0.96)); }

#chatbotWindow.cat-7 .question-item .num-badge,
.chatbot-window.cat-7 .question-item .num-badge { background: linear-gradient(180deg,#fbcfe8,#fda4af); color:#4a0b20; }
#chatbotWindow.cat-7 .question-item,
.chatbot-window.cat-7 .question-item { background: linear-gradient(180deg, rgba(255,246,250,0.96), rgba(255,249,251,0.96)); }

#chatbotWindow.cat-8 .question-item .num-badge,
.chatbot-window.cat-8 .question-item .num-badge { background: linear-gradient(180deg,#bde8ff,#78d8ff); color:#083344; }
#chatbotWindow.cat-8 .question-item,
.chatbot-window.cat-8 .question-item { background: linear-gradient(180deg, rgba(240,255,255,0.96), rgba(245,255,255,0.96)); }

/* Small utility animation */
@keyframes slideIn { from { opacity:0; transform:translateY(20px) scale(0.98); } to { opacity:1; transform:translateY(0) scale(1); } }
